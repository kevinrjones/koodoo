2019-02-20 07:00:32.264 +00:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-20 07:00:32.295 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-20 07:00:32.304 +00:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-20 07:00:32.304 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-20 07:00:32.305 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-20 07:00:32.305 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-20 07:00:32.305 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-20 07:00:32.305 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-20 07:00:32.484 +00:00 [WRN] Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.
2019-02-20 07:00:38.478 +00:00 [DBG] Login Url: /Account/Login
2019-02-20 07:00:38.480 +00:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-20 07:00:38.480 +00:00 [DBG] Logout Url: /Account/Logout
2019-02-20 07:00:38.480 +00:00 [DBG] ConsentUrl Url: /consent
2019-02-20 07:00:38.480 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-20 07:00:38.480 +00:00 [DBG] Error Url: /home/error
2019-02-20 07:00:38.480 +00:00 [DBG] Error Id Parameter: errorId
2019-02-20 07:00:38.499 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 07:00:38.505 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 07:00:38.505 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 07:00:38.511 +00:00 [DBG] Start token request.
2019-02-20 07:00:38.516 +00:00 [DBG] Start client validation
2019-02-20 07:00:38.520 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 07:00:38.520 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 07:00:38.520 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 07:00:38.530 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 07:00:38.536 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 07:00:38.536 +00:00 [DBG] Client validation success
2019-02-20 07:00:38.561 +00:00 [DBG] Start token request validation
2019-02-20 07:00:38.567 +00:00 [DBG] Start client credentials token request validation
2019-02-20 07:00:38.590 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 07:00:38.598 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 07:00:38.619 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 07:00:38.662 +00:00 [DBG] Token request success.
2019-02-20 07:01:40.373 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 07:01:40.373 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 07:01:40.373 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 07:01:40.373 +00:00 [DBG] Start token request.
2019-02-20 07:01:40.373 +00:00 [DBG] Start client validation
2019-02-20 07:01:40.373 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 07:01:40.373 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 07:01:40.373 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 07:01:40.373 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 07:01:40.373 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 07:01:40.373 +00:00 [DBG] Client validation success
2019-02-20 07:01:40.374 +00:00 [DBG] Start token request validation
2019-02-20 07:01:40.374 +00:00 [DBG] Start client credentials token request validation
2019-02-20 07:01:40.374 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 07:01:40.374 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 07:01:40.374 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 07:01:40.386 +00:00 [DBG] Token request success.
2019-02-20 07:02:13.017 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 07:02:13.017 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 07:02:13.017 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 07:02:13.017 +00:00 [DBG] Start token request.
2019-02-20 07:02:13.017 +00:00 [DBG] Start client validation
2019-02-20 07:02:13.017 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 07:02:13.017 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 07:02:13.017 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 07:02:13.017 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 07:02:13.017 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 07:02:13.017 +00:00 [DBG] Client validation success
2019-02-20 07:02:13.017 +00:00 [DBG] Start token request validation
2019-02-20 07:02:13.017 +00:00 [DBG] Start client credentials token request validation
2019-02-20 07:02:13.018 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 07:02:13.018 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 07:02:13.018 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 07:02:13.030 +00:00 [DBG] Token request success.
2019-02-20 07:02:32.456 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 07:02:32.456 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 07:02:32.456 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 07:02:32.456 +00:00 [DBG] Start token request.
2019-02-20 07:02:32.456 +00:00 [DBG] Start client validation
2019-02-20 07:02:32.456 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 07:02:32.456 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 07:02:32.456 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 07:02:32.456 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 07:02:32.456 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 07:02:32.456 +00:00 [DBG] Client validation success
2019-02-20 07:02:32.456 +00:00 [DBG] Start token request validation
2019-02-20 07:02:32.456 +00:00 [DBG] Start client credentials token request validation
2019-02-20 07:02:32.456 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 07:02:32.456 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 07:02:32.456 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 07:02:32.467 +00:00 [DBG] Token request success.
2019-02-20 19:26:12.845 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:26:12.846 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:26:12.846 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:26:12.846 +00:00 [DBG] Start token request.
2019-02-20 19:26:12.846 +00:00 [DBG] Start client validation
2019-02-20 19:26:12.846 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:26:12.846 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:26:12.846 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:26:12.846 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:12.846 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:26:12.846 +00:00 [DBG] Client validation success
2019-02-20 19:26:12.847 +00:00 [DBG] Start token request validation
2019-02-20 19:26:12.847 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:26:12.847 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:26:12.847 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:26:12.847 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:26:12.857 +00:00 [DBG] Token request success.
2019-02-20 19:26:38.572 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-20 19:26:38.573 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-20 19:26:38.573 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-20 19:26:38.576 +00:00 [DBG] Start authorize request
2019-02-20 19:26:38.582 +00:00 [DBG] No user present in authorize request
2019-02-20 19:26:38.586 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:38.589 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:38.592 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:38.593 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:38.603 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:38.607 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"6eadc7ba86f506be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"6eadc7ba86f506be","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 19:26:38.614 +00:00 [INF] Showing login: User is not authenticated
2019-02-20 19:26:38.752 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:38.752 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:38.752 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:38.752 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:38.752 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:38.754 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:49.728 +00:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-20 19:26:49.748 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:49.748 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:49.748 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:49.748 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:49.748 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:49.760 +00:00 [DBG] Augmenting SignInContext
2019-02-20 19:26:49.762 +00:00 [DBG] Adding idp claim with value: local
2019-02-20 19:26:49.762 +00:00 [DBG] Adding amr claim with value: pwd
2019-02-20 19:26:49.769 +00:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-20 19:26:49.770 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:49.776 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-20 19:26:49.776 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-20 19:26:49.776 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-20 19:26:49.780 +00:00 [DBG] Start authorize callback request
2019-02-20 19:26:49.782 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 19:26:49.782 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:49.782 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:49.783 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:49.783 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:49.783 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:49.783 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"6eadc7ba86f506be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ee902cfcb777e2cae56cff48a47f29d","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"6eadc7ba86f506be","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 19:26:49.784 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-20 19:26:49.794 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-20 19:26:49.794 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-20 19:26:49.794 +00:00 [INF] Showing consent: User has not yet consented
2019-02-20 19:26:49.809 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:49.809 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:49.809 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:49.809 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:49.810 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:49.810 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.625 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-20 19:26:51.636 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:51.636 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.636 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:51.636 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:51.637 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:51.647 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.650 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-20 19:26:51.651 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-20 19:26:51.651 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-20 19:26:51.651 +00:00 [DBG] Start authorize callback request
2019-02-20 19:26:51.653 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 19:26:51.653 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 19:26:51.653 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.653 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 19:26:51.653 +00:00 [DBG] No PKCE used.
2019-02-20 19:26:51.653 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 19:26:51.653 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"6eadc7ba86f506be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ee902cfcb777e2cae56cff48a47f29d","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"6eadc7ba86f506be","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 19:26:51.653 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-20 19:26:51.653 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-20 19:26:51.653 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-20 19:26:51.657 +00:00 [INF] User consented to scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-20 19:26:51.657 +00:00 [DBG] User indicated to remember consent for scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-20 19:26:51.660 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 19:26:51.670 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-20 19:26:51.685 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"6eadc7ba86f506be","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-20 19:26:51.698 +00:00 [DBG] Augmenting SignInContext
2019-02-20 19:26:51.699 +00:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-20 19:26:51.731 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:26:51.731 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:26:51.732 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:26:51.732 +00:00 [DBG] Start token request.
2019-02-20 19:26:51.732 +00:00 [DBG] Start client validation
2019-02-20 19:26:51.732 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:26:51.735 +00:00 [DBG] Start parsing for secret in post body
2019-02-20 19:26:51.735 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-20 19:26:51.735 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:26:51.735 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.735 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:26:51.735 +00:00 [DBG] Client validation success
2019-02-20 19:26:51.735 +00:00 [DBG] Start token request validation
2019-02-20 19:26:51.741 +00:00 [DBG] Start validation of authorization code token request
2019-02-20 19:26:51.749 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-20 19:26:51.749 +00:00 [DBG] Validation of authorization code token request success
2019-02-20 19:26:51.749 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"38aa5e1cf275c42912414e3cacc6ce1772ad24dfaeb654e0b7680e77549256a8","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"6eadc7ba86f506be","code":"38aa5e1cf275c42912414e3cacc6ce1772ad24dfaeb654e0b7680e77549256a8","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:26:51.753 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.753 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:26:51.753 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 19:26:51.756 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-20 19:26:51.757 +00:00 [DBG] Issued claims: ["role"]
2019-02-20 19:26:51.768 +00:00 [DBG] Token request success.
2019-02-20 19:26:51.772 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:26:51.772 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:26:51.772 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:26:51.772 +00:00 [DBG] Start token request.
2019-02-20 19:26:51.772 +00:00 [DBG] Start client validation
2019-02-20 19:26:51.772 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:26:51.772 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:26:51.772 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:26:51.772 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:26:51.772 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:26:51.772 +00:00 [DBG] Client validation success
2019-02-20 19:26:51.773 +00:00 [DBG] Start token request validation
2019-02-20 19:26:51.773 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:26:51.773 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:26:51.773 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:26:51.773 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:26:51.783 +00:00 [DBG] Token request success.
2019-02-20 19:27:49.702 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:27:49.702 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:27:49.702 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:27:49.702 +00:00 [DBG] Start token request.
2019-02-20 19:27:49.702 +00:00 [DBG] Start client validation
2019-02-20 19:27:49.703 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:27:49.703 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:27:49.703 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:27:49.703 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:27:49.703 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:27:49.703 +00:00 [DBG] Client validation success
2019-02-20 19:27:49.703 +00:00 [DBG] Start token request validation
2019-02-20 19:27:49.703 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:27:49.703 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:27:49.703 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:27:49.703 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:27:49.714 +00:00 [DBG] Token request success.
2019-02-20 19:27:49.981 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:27:49.981 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:27:49.981 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:27:49.984 +00:00 [DBG] Start key discovery request
2019-02-20 19:28:52.235 +00:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-20 19:28:52.256 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-20 19:28:52.263 +00:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-20 19:28:52.263 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-20 19:28:52.263 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-20 19:28:52.264 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-20 19:28:52.264 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-20 19:28:52.264 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-20 19:28:52.761 +00:00 [WRN] Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.
2019-02-20 19:29:39.184 +00:00 [DBG] Login Url: /Account/Login
2019-02-20 19:29:39.186 +00:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-20 19:29:39.186 +00:00 [DBG] Logout Url: /Account/Logout
2019-02-20 19:29:39.186 +00:00 [DBG] ConsentUrl Url: /consent
2019-02-20 19:29:39.186 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-20 19:29:39.186 +00:00 [DBG] Error Url: /home/error
2019-02-20 19:29:39.186 +00:00 [DBG] Error Id Parameter: errorId
2019-02-20 19:29:39.205 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:29:39.211 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:29:39.212 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:29:39.218 +00:00 [DBG] Start token request.
2019-02-20 19:29:39.223 +00:00 [DBG] Start client validation
2019-02-20 19:29:39.228 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:29:39.228 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:29:39.228 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:29:39.238 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:29:39.244 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:29:39.244 +00:00 [DBG] Client validation success
2019-02-20 19:29:39.270 +00:00 [DBG] Start token request validation
2019-02-20 19:29:39.277 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:29:39.301 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:29:39.309 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:29:39.330 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:29:39.375 +00:00 [DBG] Token request success.
2019-02-20 19:30:52.697 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:30:52.697 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:30:52.697 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:30:52.697 +00:00 [DBG] Start token request.
2019-02-20 19:30:52.697 +00:00 [DBG] Start client validation
2019-02-20 19:30:52.697 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:30:52.697 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:30:52.697 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:30:52.697 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:30:52.698 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:30:52.698 +00:00 [DBG] Client validation success
2019-02-20 19:30:52.698 +00:00 [DBG] Start token request validation
2019-02-20 19:30:52.698 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:30:52.698 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:30:52.698 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:30:52.699 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:30:52.709 +00:00 [DBG] Token request success.
2019-02-20 19:30:52.960 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:30:52.961 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:30:52.961 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:30:52.964 +00:00 [DBG] Start key discovery request
2019-02-20 19:34:28.685 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:34:28.685 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:34:28.685 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:34:28.685 +00:00 [DBG] Start token request.
2019-02-20 19:34:28.685 +00:00 [DBG] Start client validation
2019-02-20 19:34:28.685 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:34:28.685 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:34:28.685 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:34:28.686 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:34:28.686 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:34:28.686 +00:00 [DBG] Client validation success
2019-02-20 19:34:28.686 +00:00 [DBG] Start token request validation
2019-02-20 19:34:28.686 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:34:28.686 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:34:28.686 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:34:28.686 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:34:28.696 +00:00 [DBG] Token request success.
2019-02-20 19:34:28.949 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:34:28.949 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:34:28.949 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:34:28.949 +00:00 [DBG] Start key discovery request
2019-02-20 19:36:17.227 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:36:17.227 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:36:17.227 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:36:17.227 +00:00 [DBG] Start token request.
2019-02-20 19:36:17.227 +00:00 [DBG] Start client validation
2019-02-20 19:36:17.227 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:36:17.227 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:36:17.227 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:36:17.227 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:36:17.227 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:36:17.227 +00:00 [DBG] Client validation success
2019-02-20 19:36:17.227 +00:00 [DBG] Start token request validation
2019-02-20 19:36:17.227 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:36:17.227 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:36:17.228 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:36:17.228 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:36:17.238 +00:00 [DBG] Token request success.
2019-02-20 19:36:36.568 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:36:36.568 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:36:36.568 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:36:36.568 +00:00 [DBG] Start token request.
2019-02-20 19:36:36.568 +00:00 [DBG] Start client validation
2019-02-20 19:36:36.568 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:36:36.568 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:36:36.569 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:36:36.569 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:36:36.569 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:36:36.569 +00:00 [DBG] Client validation success
2019-02-20 19:36:36.569 +00:00 [DBG] Start token request validation
2019-02-20 19:36:36.569 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:36:36.569 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:36:36.569 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:36:36.569 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:36:36.579 +00:00 [DBG] Token request success.
2019-02-20 19:36:57.166 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:36:57.166 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:36:57.166 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:36:57.166 +00:00 [DBG] Start token request.
2019-02-20 19:36:57.166 +00:00 [DBG] Start client validation
2019-02-20 19:36:57.166 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:36:57.166 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:36:57.166 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:36:57.166 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:36:57.166 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:36:57.166 +00:00 [DBG] Client validation success
2019-02-20 19:36:57.167 +00:00 [DBG] Start token request validation
2019-02-20 19:36:57.167 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:36:57.167 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:36:57.167 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:36:57.167 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:36:57.179 +00:00 [DBG] Token request success.
2019-02-20 19:36:57.445 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:36:57.445 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:36:57.445 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:36:57.445 +00:00 [DBG] Start key discovery request
2019-02-20 19:40:31.244 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:40:31.245 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:40:31.245 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:40:31.245 +00:00 [DBG] Start token request.
2019-02-20 19:40:31.245 +00:00 [DBG] Start client validation
2019-02-20 19:40:31.245 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:40:31.245 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:40:31.245 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:40:31.245 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:40:31.245 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:40:31.245 +00:00 [DBG] Client validation success
2019-02-20 19:40:31.245 +00:00 [DBG] Start token request validation
2019-02-20 19:40:31.245 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:40:31.245 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:40:31.245 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:40:31.245 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:40:31.256 +00:00 [DBG] Token request success.
2019-02-20 19:40:31.525 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:40:31.525 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:40:31.525 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:40:31.525 +00:00 [DBG] Start key discovery request
2019-02-20 19:50:20.013 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 19:50:20.013 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 19:50:20.013 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 19:50:20.013 +00:00 [DBG] Start token request.
2019-02-20 19:50:20.013 +00:00 [DBG] Start client validation
2019-02-20 19:50:20.013 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 19:50:20.013 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 19:50:20.013 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 19:50:20.013 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 19:50:20.013 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 19:50:20.014 +00:00 [DBG] Client validation success
2019-02-20 19:50:20.014 +00:00 [DBG] Start token request validation
2019-02-20 19:50:20.014 +00:00 [DBG] Start client credentials token request validation
2019-02-20 19:50:20.014 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 19:50:20.014 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 19:50:20.014 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 19:50:20.027 +00:00 [DBG] Token request success.
2019-02-20 19:50:20.306 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 19:50:20.306 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 19:50:20.306 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 19:50:20.306 +00:00 [DBG] Start key discovery request
2019-02-20 20:00:20.343 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:00:20.343 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:00:20.343 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:00:20.343 +00:00 [DBG] Start token request.
2019-02-20 20:00:20.343 +00:00 [DBG] Start client validation
2019-02-20 20:00:20.343 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:00:20.343 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:00:20.343 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:00:20.343 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:00:20.343 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:00:20.343 +00:00 [DBG] Client validation success
2019-02-20 20:00:20.343 +00:00 [DBG] Start token request validation
2019-02-20 20:00:20.343 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:00:20.343 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:00:20.343 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:00:20.343 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:00:20.355 +00:00 [DBG] Token request success.
2019-02-20 20:00:58.040 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:00:58.040 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:00:58.040 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:00:58.040 +00:00 [DBG] Start token request.
2019-02-20 20:00:58.040 +00:00 [DBG] Start client validation
2019-02-20 20:00:58.040 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:00:58.040 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:00:58.040 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:00:58.040 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:00:58.040 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:00:58.040 +00:00 [DBG] Client validation success
2019-02-20 20:00:58.040 +00:00 [DBG] Start token request validation
2019-02-20 20:00:58.040 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:00:58.040 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:00:58.041 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:00:58.041 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:00:58.052 +00:00 [DBG] Token request success.
2019-02-20 20:00:58.326 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 20:00:58.327 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 20:00:58.327 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 20:00:58.327 +00:00 [DBG] Start key discovery request
2019-02-20 20:01:16.262 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:01:16.262 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:01:16.262 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:01:16.262 +00:00 [DBG] Start token request.
2019-02-20 20:01:16.262 +00:00 [DBG] Start client validation
2019-02-20 20:01:16.263 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:01:16.263 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:01:16.263 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:01:16.263 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:01:16.263 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:01:16.263 +00:00 [DBG] Client validation success
2019-02-20 20:01:16.263 +00:00 [DBG] Start token request validation
2019-02-20 20:01:16.263 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:01:16.263 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:01:16.263 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:01:16.263 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:01:16.273 +00:00 [DBG] Token request success.
2019-02-20 20:01:18.896 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:01:18.896 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:01:18.896 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:01:18.896 +00:00 [DBG] Start token request.
2019-02-20 20:01:18.896 +00:00 [DBG] Start client validation
2019-02-20 20:01:18.896 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:01:18.896 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:01:18.896 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:01:18.896 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:01:18.896 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:01:18.896 +00:00 [DBG] Client validation success
2019-02-20 20:01:18.896 +00:00 [DBG] Start token request validation
2019-02-20 20:01:18.896 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:01:18.897 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:01:18.897 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:01:18.897 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:01:18.907 +00:00 [DBG] Token request success.
2019-02-20 20:01:37.424 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:01:37.424 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:01:37.424 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:01:37.424 +00:00 [DBG] Start token request.
2019-02-20 20:01:37.424 +00:00 [DBG] Start client validation
2019-02-20 20:01:37.424 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:01:37.424 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:01:37.424 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:01:37.424 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:01:37.424 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:01:37.424 +00:00 [DBG] Client validation success
2019-02-20 20:01:37.424 +00:00 [DBG] Start token request validation
2019-02-20 20:01:37.425 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:01:37.425 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:01:37.425 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:01:37.425 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:01:37.436 +00:00 [DBG] Token request success.
2019-02-20 20:02:05.863 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:02:05.863 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:02:05.863 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:02:05.863 +00:00 [DBG] Start token request.
2019-02-20 20:02:05.863 +00:00 [DBG] Start client validation
2019-02-20 20:02:05.863 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:02:05.863 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:02:05.863 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:02:05.864 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:02:05.864 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:02:05.864 +00:00 [DBG] Client validation success
2019-02-20 20:02:05.864 +00:00 [DBG] Start token request validation
2019-02-20 20:02:05.864 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:02:05.864 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:02:05.864 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:02:05.864 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:02:05.879 +00:00 [DBG] Token request success.
2019-02-20 20:02:25.145 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:02:25.145 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:02:25.145 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:02:25.145 +00:00 [DBG] Start token request.
2019-02-20 20:02:25.145 +00:00 [DBG] Start client validation
2019-02-20 20:02:25.145 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:02:25.145 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:02:25.145 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:02:25.145 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:02:25.146 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:02:25.146 +00:00 [DBG] Client validation success
2019-02-20 20:02:25.146 +00:00 [DBG] Start token request validation
2019-02-20 20:02:25.146 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:02:25.146 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:02:25.146 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:02:25.146 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:02:25.156 +00:00 [DBG] Token request success.
2019-02-20 20:02:25.433 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 20:02:25.433 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 20:02:25.433 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 20:02:25.433 +00:00 [DBG] Start key discovery request
2019-02-20 20:15:28.039 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:15:28.039 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:15:28.039 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:15:28.039 +00:00 [DBG] Start token request.
2019-02-20 20:15:28.039 +00:00 [DBG] Start client validation
2019-02-20 20:15:28.039 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:15:28.039 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:15:28.039 +00:00 [DBG] Secret id found: kotlin_oauth
2019-02-20 20:15:28.039 +00:00 [ERR] No client with id 'kotlin_oauth' found. aborting
2019-02-20 20:16:04.326 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:16:04.326 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:16:04.326 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:16:04.326 +00:00 [DBG] Start token request.
2019-02-20 20:16:04.326 +00:00 [DBG] Start client validation
2019-02-20 20:16:04.326 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:16:04.326 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:16:04.326 +00:00 [DBG] Secret id found: todolistAPI
2019-02-20 20:16:04.326 +00:00 [ERR] No client with id 'todolistAPI' found. aborting
2019-02-20 20:16:46.692 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:16:46.692 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:16:46.692 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:16:46.692 +00:00 [DBG] Start token request.
2019-02-20 20:16:46.692 +00:00 [DBG] Start client validation
2019-02-20 20:16:46.692 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:16:46.692 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:16:46.692 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:16:46.692 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:16:46.692 +00:00 [DBG] No matching hashed secret found.
2019-02-20 20:16:46.692 +00:00 [DBG] Secret validators could not validate secret
2019-02-20 20:16:46.692 +00:00 [ERR] Client secret validation failed for client: todolistClient.
2019-02-20 20:17:43.717 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:17:43.717 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:17:43.717 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:17:43.717 +00:00 [DBG] Start token request.
2019-02-20 20:17:43.717 +00:00 [DBG] Start client validation
2019-02-20 20:17:43.717 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:17:43.717 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:17:43.717 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:17:43.717 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:17:43.718 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:17:43.718 +00:00 [DBG] Client validation success
2019-02-20 20:17:43.718 +00:00 [DBG] Start token request validation
2019-02-20 20:17:43.718 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:17:43.718 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:17:43.718 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:17:43.718 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:17:43.731 +00:00 [DBG] Token request success.
2019-02-20 20:18:15.634 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:18:15.634 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:18:15.634 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:18:15.634 +00:00 [DBG] Start token request.
2019-02-20 20:18:15.634 +00:00 [DBG] Start client validation
2019-02-20 20:18:15.634 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:18:15.634 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:18:15.634 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:18:15.634 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:18:15.634 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:18:15.634 +00:00 [DBG] Client validation success
2019-02-20 20:18:15.634 +00:00 [DBG] Start token request validation
2019-02-20 20:18:15.634 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:18:15.634 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:18:15.634 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:18:15.634 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:18:15.644 +00:00 [DBG] Token request success.
2019-02-20 20:20:09.143 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:20:09.143 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:20:09.143 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:20:09.143 +00:00 [DBG] Start token request.
2019-02-20 20:20:09.143 +00:00 [DBG] Start client validation
2019-02-20 20:20:09.143 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:20:09.143 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:20:09.143 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:20:09.143 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:20:09.143 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:20:09.143 +00:00 [DBG] Client validation success
2019-02-20 20:20:09.143 +00:00 [DBG] Start token request validation
2019-02-20 20:20:09.143 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:20:09.143 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:20:09.143 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:20:09.143 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:20:09.153 +00:00 [DBG] Token request success.
2019-02-20 20:56:56.634 +00:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-20 20:56:56.657 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-20 20:56:56.665 +00:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-20 20:56:56.666 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-20 20:56:56.666 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-20 20:56:56.666 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-20 20:56:56.666 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-20 20:56:56.666 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-20 20:56:56.847 +00:00 [WRN] Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.
2019-02-20 20:57:02.540 +00:00 [DBG] Login Url: /Account/Login
2019-02-20 20:57:02.542 +00:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-20 20:57:02.542 +00:00 [DBG] Logout Url: /Account/Logout
2019-02-20 20:57:02.542 +00:00 [DBG] ConsentUrl Url: /consent
2019-02-20 20:57:02.542 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-20 20:57:02.542 +00:00 [DBG] Error Url: /home/error
2019-02-20 20:57:02.542 +00:00 [DBG] Error Id Parameter: errorId
2019-02-20 20:57:02.698 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:02.712 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:02.716 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:02.717 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:02.748 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:02.749 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:17.082 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-20 20:57:17.085 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-20 20:57:17.086 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-20 20:57:17.088 +00:00 [DBG] Start authorize request
2019-02-20 20:57:17.095 +00:00 [DBG] No user present in authorize request
2019-02-20 20:57:17.095 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:17.095 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:17.095 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:17.095 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:17.095 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:17.107 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"12e8abb3c771da2c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"12e8abb3c771da2c","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 20:57:17.117 +00:00 [INF] Showing login: User is not authenticated
2019-02-20 20:57:17.127 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:17.127 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:17.127 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:17.127 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:17.127 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:17.128 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:21.642 +00:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-20 20:57:21.674 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:21.674 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:21.674 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:21.674 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:21.674 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:21.688 +00:00 [DBG] Augmenting SignInContext
2019-02-20 20:57:21.690 +00:00 [DBG] Adding idp claim with value: local
2019-02-20 20:57:21.691 +00:00 [DBG] Adding amr claim with value: pwd
2019-02-20 20:57:21.704 +00:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-20 20:57:21.705 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:21.711 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-20 20:57:21.711 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-20 20:57:21.711 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-20 20:57:21.716 +00:00 [DBG] Start authorize callback request
2019-02-20 20:57:21.718 +00:00 [DBG] No user present in authorize request
2019-02-20 20:57:21.719 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:21.719 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:21.719 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:21.719 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:21.719 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:21.719 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"12e8abb3c771da2c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"12e8abb3c771da2c","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 20:57:21.719 +00:00 [INF] Showing login: User is not authenticated
2019-02-20 20:57:21.723 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:57:21.723 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:57:21.723 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:57:21.723 +00:00 [DBG] No PKCE used.
2019-02-20 20:57:21.723 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:57:21.723 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.319 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-20 20:58:33.319 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-20 20:58:33.319 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-20 20:58:33.320 +00:00 [DBG] Start authorize request
2019-02-20 20:58:33.320 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 20:58:33.320 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:33.320 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.320 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:33.320 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:33.320 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:33.320 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"a20f20310b2d9b88","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ee902cfcb777e2cae56cff48a47f29d","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"a20f20310b2d9b88","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 20:58:33.321 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-20 20:58:33.332 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-20 20:58:33.333 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-20 20:58:33.333 +00:00 [INF] Showing consent: User has not yet consented
2019-02-20 20:58:33.351 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:33.352 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.352 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:33.352 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:33.352 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:33.352 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.519 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-20 20:58:33.519 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-20 20:58:33.519 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-20 20:58:33.519 +00:00 [DBG] Start authorize request
2019-02-20 20:58:33.519 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 20:58:33.519 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:33.519 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.519 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:33.520 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:33.520 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:33.521 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"add459e9b430c691","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ee902cfcb777e2cae56cff48a47f29d","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"add459e9b430c691","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 20:58:33.521 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-20 20:58:33.521 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-20 20:58:33.521 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-20 20:58:33.521 +00:00 [INF] Showing consent: User has not yet consented
2019-02-20 20:58:33.528 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:33.529 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:33.529 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:33.529 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:33.529 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:33.529 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.206 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-20 20:58:37.224 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:37.224 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.224 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:37.224 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:37.224 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:37.242 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.247 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-20 20:58:37.247 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-20 20:58:37.247 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-20 20:58:37.247 +00:00 [DBG] Start authorize callback request
2019-02-20 20:58:37.252 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 20:58:37.252 +00:00 [DBG] Start authorize request protocol validation
2019-02-20 20:58:37.252 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.252 +00:00 [DBG] Checking for PKCE parameters
2019-02-20 20:58:37.252 +00:00 [DBG] No PKCE used.
2019-02-20 20:58:37.252 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-20 20:58:37.252 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"add459e9b430c691","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ee902cfcb777e2cae56cff48a47f29d","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"add459e9b430c691","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-20 20:58:37.252 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-20 20:58:37.252 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-20 20:58:37.252 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-20 20:58:37.257 +00:00 [INF] User consented to scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-20 20:58:37.258 +00:00 [DBG] User indicated to remember consent for scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-20 20:58:37.260 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 20:58:37.275 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-20 20:58:37.291 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"add459e9b430c691","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-20 20:58:37.454 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:58:37.458 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:58:37.458 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:58:37.466 +00:00 [DBG] Start token request.
2019-02-20 20:58:37.474 +00:00 [DBG] Start client validation
2019-02-20 20:58:37.479 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:58:37.483 +00:00 [DBG] Start parsing for secret in post body
2019-02-20 20:58:37.484 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-20 20:58:37.484 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:58:37.484 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.490 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:58:37.490 +00:00 [DBG] Client validation success
2019-02-20 20:58:37.495 +00:00 [DBG] Start token request validation
2019-02-20 20:58:37.503 +00:00 [DBG] Start validation of authorization code token request
2019-02-20 20:58:37.511 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-20 20:58:37.511 +00:00 [DBG] Validation of authorization code token request success
2019-02-20 20:58:37.514 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"9d256b9f9287eb6052543db5ac340ab82c414085aebc5d54d030a1a7fdb6fac4","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"add459e9b430c691","code":"9d256b9f9287eb6052543db5ac340ab82c414085aebc5d54d030a1a7fdb6fac4","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:58:37.530 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.540 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:58:37.540 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-20 20:58:37.545 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-20 20:58:37.547 +00:00 [DBG] Issued claims: ["role"]
2019-02-20 20:58:37.604 +00:00 [DBG] Token request success.
2019-02-20 20:58:37.672 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-20 20:58:37.672 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-20 20:58:37.673 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-20 20:58:37.673 +00:00 [DBG] Start token request.
2019-02-20 20:58:37.673 +00:00 [DBG] Start client validation
2019-02-20 20:58:37.673 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-20 20:58:37.673 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-20 20:58:37.673 +00:00 [DBG] Secret id found: todolistClient
2019-02-20 20:58:37.673 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-20 20:58:37.673 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-20 20:58:37.673 +00:00 [DBG] Client validation success
2019-02-20 20:58:37.673 +00:00 [DBG] Start token request validation
2019-02-20 20:58:37.677 +00:00 [DBG] Start client credentials token request validation
2019-02-20 20:58:37.680 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-20 20:58:37.680 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-20 20:58:37.683 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-20 20:58:37.697 +00:00 [DBG] Token request success.
2019-02-20 20:58:38.015 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-20 20:58:38.016 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-20 20:58:38.016 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-20 20:58:38.019 +00:00 [DBG] Start key discovery request
2019-02-24 08:33:16.471 +00:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-24 08:33:16.491 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-24 08:33:16.499 +00:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-24 08:33:16.499 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-24 08:33:16.499 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-24 08:33:16.499 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-24 08:33:16.499 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-24 08:33:16.499 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-24 08:33:17.207 +00:00 [WRN] Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.
2019-02-24 08:33:34.185 +00:00 [DBG] Login Url: /Account/Login
2019-02-24 08:33:34.186 +00:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-24 08:33:34.186 +00:00 [DBG] Logout Url: /Account/Logout
2019-02-24 08:33:34.186 +00:00 [DBG] ConsentUrl Url: /consent
2019-02-24 08:33:34.186 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-24 08:33:34.186 +00:00 [DBG] Error Url: /home/error
2019-02-24 08:33:34.186 +00:00 [DBG] Error Id Parameter: errorId
2019-02-24 08:33:34.212 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:33:34.219 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:33:34.219 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:33:34.226 +00:00 [DBG] Start token request.
2019-02-24 08:33:34.233 +00:00 [DBG] Start client validation
2019-02-24 08:33:34.237 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:33:34.240 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:33:34.253 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:33:34.253 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:33:34.265 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:34.272 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:33:34.272 +00:00 [DBG] Client validation success
2019-02-24 08:33:34.283 +00:00 [DBG] Start token request validation
2019-02-24 08:33:34.292 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:33:34.297 +00:00 [DBG] authorization_code grant with value: 69ec1bb2a8a29bb4aa2780507533bbe0e3a1e8e872e4dc7a33a7f679ba2359af not found in store.
2019-02-24 08:33:34.308 +00:00 [ERR] Invalid authorization code: ["69ec1bb2a8a29bb4aa2780507533bbe0e3a1e8e872e4dc7a33a7f679ba2359af"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"69ec1bb2a8a29bb4aa2780507533bbe0e3a1e8e872e4dc7a33a7f679ba2359af","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"01722e1303fb34ee","code":"69ec1bb2a8a29bb4aa2780507533bbe0e3a1e8e872e4dc7a33a7f679ba2359af","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:33:34.390 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.390 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.392 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 08:33:34.394 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 08:33:34.394 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 08:33:34.398 +00:00 [DBG] Start authorize request
2019-02-24 08:33:34.400 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.404 +00:00 [DBG] No user present in authorize request
2019-02-24 08:33:34.408 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:34.412 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:34.416 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:34.417 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:34.449 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:34.452 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"ecfc693216cfb4b5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"ecfc693216cfb4b5","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:33:34.459 +00:00 [INF] Showing login: User is not authenticated
2019-02-24 08:33:34.466 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.466 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.594 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:34.594 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:34.594 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:34.594 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:34.594 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:34.594 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:34.597 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:43.824 +00:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-24 08:33:43.824 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:43.824 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:43.843 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:43.844 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:43.844 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:43.844 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:43.844 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:43.844 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:43.856 +00:00 [DBG] Augmenting SignInContext
2019-02-24 08:33:43.857 +00:00 [DBG] Adding idp claim with value: local
2019-02-24 08:33:43.857 +00:00 [DBG] Adding amr claim with value: pwd
2019-02-24 08:33:43.859 +00:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2019-02-24 08:33:43.865 +00:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-24 08:33:43.866 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:43.869 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-24 08:33:43.869 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-24 08:33:43.869 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-24 08:33:43.874 +00:00 [DBG] Start authorize callback request
2019-02-24 08:33:43.876 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:33:43.876 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:43.876 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:43.877 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:43.877 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:43.877 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:43.877 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"ecfc693216cfb4b5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"ecfc693216cfb4b5","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:33:43.878 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:33:43.885 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-24 08:33:43.885 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-24 08:33:43.885 +00:00 [INF] Showing consent: User has not yet consented
2019-02-24 08:33:43.901 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:43.901 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:43.901 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:43.901 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:43.902 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:43.902 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.831 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-24 08:33:45.845 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:45.845 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.845 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:45.845 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:45.845 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:45.856 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.859 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-24 08:33:45.859 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-24 08:33:45.859 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-24 08:33:45.859 +00:00 [DBG] Start authorize callback request
2019-02-24 08:33:45.861 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:33:45.861 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:33:45.861 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.861 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:33:45.862 +00:00 [DBG] No PKCE used.
2019-02-24 08:33:45.862 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:33:45.862 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"ecfc693216cfb4b5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"ecfc693216cfb4b5","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:33:45.862 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:33:45.862 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-24 08:33:45.862 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-24 08:33:45.866 +00:00 [INF] User consented to scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-24 08:33:45.867 +00:00 [DBG] User indicated to remember consent for scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-24 08:33:45.870 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:33:45.879 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 08:33:45.894 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"ecfc693216cfb4b5","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 08:33:45.907 +00:00 [DBG] Augmenting SignInContext
2019-02-24 08:33:45.907 +00:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-24 08:33:45.916 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:33:45.916 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:33:45.916 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:33:45.916 +00:00 [DBG] Start token request.
2019-02-24 08:33:45.916 +00:00 [DBG] Start client validation
2019-02-24 08:33:45.916 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:33:45.916 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:33:45.916 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:33:45.916 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:33:45.916 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.916 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:33:45.917 +00:00 [DBG] Client validation success
2019-02-24 08:33:45.917 +00:00 [DBG] Start token request validation
2019-02-24 08:33:45.917 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:33:45.925 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 08:33:45.925 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 08:33:45.925 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"ecfc693216cfb4b5","code":"748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:33:45.939 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:33:45.948 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 08:33:45.948 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:33:45.951 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 08:33:45.953 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 08:33:45.990 +00:00 [DBG] Token request success.
2019-02-24 08:35:30.485 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:35:30.485 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:35:30.485 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:35:30.485 +00:00 [DBG] Start token request.
2019-02-24 08:35:30.485 +00:00 [DBG] Start client validation
2019-02-24 08:35:30.486 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:35:30.486 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:35:30.486 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:35:30.486 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:35:30.486 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:35:30.486 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:35:30.486 +00:00 [DBG] Client validation success
2019-02-24 08:35:30.486 +00:00 [DBG] Start token request validation
2019-02-24 08:35:30.486 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:35:30.486 +00:00 [DBG] authorization_code grant with value: 748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d not found in store.
2019-02-24 08:35:30.486 +00:00 [ERR] Invalid authorization code: ["748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"ecfc693216cfb4b5","code":"748cec796bb0a1d77e0a871eee3915e037d0ea095ce87df0ab8a13f892b14b4d","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:35:30.492 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 08:35:30.492 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 08:35:30.492 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 08:35:30.492 +00:00 [DBG] Start authorize request
2019-02-24 08:35:30.492 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:35:30.492 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:35:30.492 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:35:30.492 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:35:30.492 +00:00 [DBG] No PKCE used.
2019-02-24 08:35:30.493 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:35:30.493 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"88c42a29129d8790","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"88c42a29129d8790","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:35:30.493 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:35:30.494 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 08:35:30.495 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 08:35:30.495 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"88c42a29129d8790","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 08:35:30.500 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:35:30.500 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:35:30.500 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:35:30.500 +00:00 [DBG] Start token request.
2019-02-24 08:35:30.500 +00:00 [DBG] Start client validation
2019-02-24 08:35:30.500 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:35:30.500 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:35:30.500 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:35:30.500 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:35:30.500 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:35:30.500 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:35:30.500 +00:00 [DBG] Client validation success
2019-02-24 08:35:30.500 +00:00 [DBG] Start token request validation
2019-02-24 08:35:30.500 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:35:30.500 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 08:35:30.500 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 08:35:30.501 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"57a036033b47829599b123ce3b587880c74aa134027921434021bd3cea34d549","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"88c42a29129d8790","code":"57a036033b47829599b123ce3b587880c74aa134027921434021bd3cea34d549","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:35:30.501 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:35:30.501 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 08:35:30.501 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:35:30.501 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 08:35:30.501 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 08:35:30.511 +00:00 [DBG] Token request success.
2019-02-24 08:36:55.890 +00:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-24 08:36:55.911 +00:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-02-24 08:36:55.918 +00:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-24 08:36:55.918 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-24 08:36:55.918 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-24 08:36:55.918 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-24 08:36:55.918 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-24 08:36:55.918 +00:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-24 08:36:57.484 +00:00 [WRN] Overriding address(es) 'https://localhost:5001, http://localhost:5000'. Binding to endpoints defined in UseKestrel() instead.
2019-02-24 08:37:11.208 +00:00 [DBG] Login Url: /Account/Login
2019-02-24 08:37:11.210 +00:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-24 08:37:11.210 +00:00 [DBG] Logout Url: /Account/Logout
2019-02-24 08:37:11.210 +00:00 [DBG] ConsentUrl Url: /consent
2019-02-24 08:37:11.210 +00:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-24 08:37:11.210 +00:00 [DBG] Error Url: /home/error
2019-02-24 08:37:11.210 +00:00 [DBG] Error Id Parameter: errorId
2019-02-24 08:37:11.232 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 08:37:11.236 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 08:37:11.236 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 08:37:11.240 +00:00 [DBG] Start authorize request
2019-02-24 08:37:11.251 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:37:11.254 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:37:11.268 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:11.273 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:37:11.274 +00:00 [DBG] No PKCE used.
2019-02-24 08:37:11.305 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:37:11.315 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"9c6ec7c07cb29226","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"9c6ec7c07cb29226","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:37:11.328 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:37:11.341 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-24 08:37:11.341 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-24 08:37:11.341 +00:00 [INF] Showing consent: User has not yet consented
2019-02-24 08:37:11.485 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:37:11.485 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:11.485 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:37:11.485 +00:00 [DBG] No PKCE used.
2019-02-24 08:37:11.485 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:37:11.486 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:11.610 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:37:11.610 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:11.610 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:37:11.610 +00:00 [DBG] No PKCE used.
2019-02-24 08:37:11.611 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:37:11.611 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.432 +00:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-24 08:37:14.460 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:37:14.460 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.460 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:37:14.460 +00:00 [DBG] No PKCE used.
2019-02-24 08:37:14.460 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:37:14.479 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.482 +00:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-24 08:37:14.482 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-24 08:37:14.482 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-24 08:37:14.486 +00:00 [DBG] Start authorize callback request
2019-02-24 08:37:14.490 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:37:14.490 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:37:14.490 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.490 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:37:14.490 +00:00 [DBG] No PKCE used.
2019-02-24 08:37:14.490 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:37:14.490 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"9c6ec7c07cb29226","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"9c6ec7c07cb29226","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:37:14.490 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:37:14.490 +00:00 [DBG] user_consent grant with value: todolistClient|5BE86359-073C-434B-AD2D-A3932222DABE not found in store.
2019-02-24 08:37:14.490 +00:00 [DBG] Found no prior consent from consent store, consent is required
2019-02-24 08:37:14.494 +00:00 [INF] User consented to scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-24 08:37:14.495 +00:00 [DBG] User indicated to remember consent for scopes: ["todolistAPI.read","todolistAPI.write"]
2019-02-24 08:37:14.497 +00:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:37:14.508 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 08:37:14.523 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"9c6ec7c07cb29226","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 08:37:14.676 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:37:14.680 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:37:14.680 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:37:14.685 +00:00 [DBG] Start token request.
2019-02-24 08:37:14.690 +00:00 [DBG] Start client validation
2019-02-24 08:37:14.694 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:37:14.697 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:37:14.697 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:37:14.698 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:37:14.698 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.705 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:37:14.705 +00:00 [DBG] Client validation success
2019-02-24 08:37:14.709 +00:00 [DBG] Start token request validation
2019-02-24 08:37:14.717 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:37:14.724 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 08:37:14.724 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 08:37:14.725 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"5c495436dfa8b5e6e2f04a06b00bc01095f1513cc2bc047ca08467c374f4bdc0","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"9c6ec7c07cb29226","code":"5c495436dfa8b5e6e2f04a06b00bc01095f1513cc2bc047ca08467c374f4bdc0","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:37:14.735 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:37:14.745 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 08:37:14.745 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:37:14.749 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 08:37:14.751 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 08:37:14.791 +00:00 [DBG] Token request success.
2019-02-24 08:39:54.551 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 08:39:54.551 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 08:39:54.551 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 08:39:54.551 +00:00 [DBG] Start authorize request
2019-02-24 08:39:54.551 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:39:54.551 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 08:39:54.551 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:39:54.551 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 08:39:54.551 +00:00 [DBG] No PKCE used.
2019-02-24 08:39:54.552 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 08:39:54.552 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"694fb13e04484987","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"694fb13e04484987","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 08:39:54.552 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 08:39:54.554 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 08:39:54.554 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 08:39:54.554 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"694fb13e04484987","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 08:39:54.710 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 08:39:54.710 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 08:39:54.710 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 08:39:54.710 +00:00 [DBG] Start token request.
2019-02-24 08:39:54.710 +00:00 [DBG] Start client validation
2019-02-24 08:39:54.710 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 08:39:54.710 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 08:39:54.710 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 08:39:54.710 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 08:39:54.711 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:39:54.711 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 08:39:54.711 +00:00 [DBG] Client validation success
2019-02-24 08:39:54.711 +00:00 [DBG] Start token request validation
2019-02-24 08:39:54.711 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 08:39:54.711 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 08:39:54.711 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 08:39:54.711 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"c9fe5efc72ca69c87434ef664a83bfe9e258bf5b04dbd1c8a06a51b545542223","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"694fb13e04484987","code":"c9fe5efc72ca69c87434ef664a83bfe9e258bf5b04dbd1c8a06a51b545542223","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 08:39:54.712 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 08:39:54.712 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 08:39:54.712 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 08:39:54.712 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 08:39:54.712 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 08:39:54.724 +00:00 [DBG] Token request success.
2019-02-24 09:14:21.239 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:14:21.240 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:14:21.240 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:14:21.240 +00:00 [DBG] Start authorize request
2019-02-24 09:14:21.240 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:14:21.240 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:14:21.240 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:14:21.240 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:14:21.240 +00:00 [DBG] No PKCE used.
2019-02-24 09:14:21.240 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:14:21.241 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"f8014d2f05f18330","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"f8014d2f05f18330","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:14:21.241 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:14:21.241 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:14:21.241 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:14:21.241 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"f8014d2f05f18330","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:14:21.380 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:14:21.380 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:14:21.380 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:14:21.380 +00:00 [DBG] Start token request.
2019-02-24 09:14:21.380 +00:00 [DBG] Start client validation
2019-02-24 09:14:21.380 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:14:21.380 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:14:21.380 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:14:21.380 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:14:21.380 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:14:21.380 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:14:21.380 +00:00 [DBG] Client validation success
2019-02-24 09:14:21.381 +00:00 [DBG] Start token request validation
2019-02-24 09:14:21.381 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:14:21.381 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:14:21.381 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:14:21.381 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"f8014d2f05f18330","code":"4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:14:21.381 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:14:21.381 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:14:21.381 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:14:21.381 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:14:21.381 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:14:21.391 +00:00 [DBG] Token request success.
2019-02-24 09:15:44.807 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:15:44.807 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:15:44.807 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:15:44.807 +00:00 [DBG] Start token request.
2019-02-24 09:15:44.807 +00:00 [DBG] Start client validation
2019-02-24 09:15:44.807 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:15:44.807 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:15:44.807 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:15:44.807 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:15:44.807 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:15:44.807 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:15:44.807 +00:00 [DBG] Client validation success
2019-02-24 09:15:44.807 +00:00 [DBG] Start token request validation
2019-02-24 09:15:44.807 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:15:44.808 +00:00 [DBG] authorization_code grant with value: 4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c not found in store.
2019-02-24 09:15:44.808 +00:00 [ERR] Invalid authorization code: ["4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"f8014d2f05f18330","code":"4227f18576cd8070f468b66f2f18da3e66a4ad630286094e0844e088371edf6c","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:15:44.854 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:15:44.854 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:15:44.854 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:15:44.854 +00:00 [DBG] Start authorize request
2019-02-24 09:15:44.854 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:15:44.854 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:15:44.854 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:15:44.854 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:15:44.854 +00:00 [DBG] No PKCE used.
2019-02-24 09:15:44.854 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:15:44.854 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"61368e1c4bdfb19b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"61368e1c4bdfb19b","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:15:44.854 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:15:44.854 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:15:44.855 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:15:44.855 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"61368e1c4bdfb19b","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:15:44.863 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:15:44.863 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:15:44.863 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:15:44.863 +00:00 [DBG] Start token request.
2019-02-24 09:15:44.863 +00:00 [DBG] Start client validation
2019-02-24 09:15:44.863 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:15:44.863 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:15:44.863 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:15:44.863 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:15:44.863 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:15:44.863 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:15:44.863 +00:00 [DBG] Client validation success
2019-02-24 09:15:44.863 +00:00 [DBG] Start token request validation
2019-02-24 09:15:44.864 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:15:44.864 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:15:44.864 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:15:44.864 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"61368e1c4bdfb19b","code":"5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:15:44.864 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:15:44.864 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:15:44.864 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:15:44.864 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:15:44.864 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:15:44.877 +00:00 [DBG] Token request success.
2019-02-24 09:27:26.050 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:27:26.050 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:27:26.051 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:27:26.051 +00:00 [DBG] Start token request.
2019-02-24 09:27:26.051 +00:00 [DBG] Start client validation
2019-02-24 09:27:26.051 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:27:26.051 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:27:26.051 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:27:26.051 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:27:26.051 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:27:26.051 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:27:26.051 +00:00 [DBG] Client validation success
2019-02-24 09:27:26.052 +00:00 [DBG] Start token request validation
2019-02-24 09:27:26.052 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:27:26.052 +00:00 [DBG] authorization_code grant with value: 5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780 not found in store.
2019-02-24 09:27:26.052 +00:00 [ERR] Invalid authorization code: ["5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"61368e1c4bdfb19b","code":"5b4b99375792af82ed939c1e81f5d8f49867a949c3d4887d376bcea6c6483780","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:27:26.100 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:27:26.101 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:27:26.101 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:27:26.101 +00:00 [DBG] Start authorize request
2019-02-24 09:27:26.101 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:27:26.101 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:27:26.101 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:27:26.101 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:27:26.101 +00:00 [DBG] No PKCE used.
2019-02-24 09:27:26.101 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:27:26.101 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"e568083e8baa6f07","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"e568083e8baa6f07","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:27:26.101 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:27:26.102 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:27:26.102 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:27:26.102 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"e568083e8baa6f07","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:27:26.107 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:27:26.107 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:27:26.107 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:27:26.107 +00:00 [DBG] Start token request.
2019-02-24 09:27:26.107 +00:00 [DBG] Start client validation
2019-02-24 09:27:26.107 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:27:26.107 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:27:26.108 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:27:26.108 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:27:26.108 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:27:26.108 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:27:26.108 +00:00 [DBG] Client validation success
2019-02-24 09:27:26.108 +00:00 [DBG] Start token request validation
2019-02-24 09:27:26.108 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:27:26.108 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:27:26.108 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:27:26.108 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"e568083e8baa6f07","code":"56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:27:26.108 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:27:26.108 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:27:26.108 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:27:26.108 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:27:26.108 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:27:26.120 +00:00 [DBG] Token request success.
2019-02-24 09:28:14.830 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:28:14.830 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:28:14.830 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:28:14.830 +00:00 [DBG] Start token request.
2019-02-24 09:28:14.830 +00:00 [DBG] Start client validation
2019-02-24 09:28:14.830 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:28:14.830 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:28:14.830 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:28:14.830 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:28:14.830 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:28:14.830 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:28:14.830 +00:00 [DBG] Client validation success
2019-02-24 09:28:14.830 +00:00 [DBG] Start token request validation
2019-02-24 09:28:14.830 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:28:14.830 +00:00 [DBG] authorization_code grant with value: 56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3 not found in store.
2019-02-24 09:28:14.831 +00:00 [ERR] Invalid authorization code: ["56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"e568083e8baa6f07","code":"56c67b464fe8428ec35460845079d160e6dedc21cf8ea911d0f9277cb2a2cdb3","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:28:14.875 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:28:14.875 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:28:14.875 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:28:14.875 +00:00 [DBG] Start authorize request
2019-02-24 09:28:14.875 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:28:14.875 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:28:14.875 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:28:14.875 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:28:14.876 +00:00 [DBG] No PKCE used.
2019-02-24 09:28:14.876 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:28:14.876 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"d9312fe5afc19cc1","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"d9312fe5afc19cc1","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:28:14.876 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:28:14.876 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:28:14.876 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:28:14.876 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"d9312fe5afc19cc1","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:28:14.882 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:28:14.882 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:28:14.882 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:28:14.882 +00:00 [DBG] Start token request.
2019-02-24 09:28:14.882 +00:00 [DBG] Start client validation
2019-02-24 09:28:14.882 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:28:14.882 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:28:14.882 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:28:14.882 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:28:14.882 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:28:14.882 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:28:14.882 +00:00 [DBG] Client validation success
2019-02-24 09:28:14.882 +00:00 [DBG] Start token request validation
2019-02-24 09:28:14.882 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:28:14.882 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:28:14.882 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:28:14.882 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"d9312fe5afc19cc1","code":"c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:28:14.882 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:28:14.882 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:28:14.882 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:28:14.882 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:28:14.883 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:28:14.895 +00:00 [DBG] Token request success.
2019-02-24 09:33:26.045 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:33:26.045 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:33:26.045 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:33:26.045 +00:00 [DBG] Start token request.
2019-02-24 09:33:26.045 +00:00 [DBG] Start client validation
2019-02-24 09:33:26.045 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:33:26.045 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:33:26.046 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:33:26.046 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:33:26.046 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:33:26.046 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:33:26.046 +00:00 [DBG] Client validation success
2019-02-24 09:33:26.046 +00:00 [DBG] Start token request validation
2019-02-24 09:33:26.046 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:33:26.046 +00:00 [DBG] authorization_code grant with value: c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3 not found in store.
2019-02-24 09:33:26.046 +00:00 [ERR] Invalid authorization code: ["c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"d9312fe5afc19cc1","code":"c42b1235b84602aa8c6ca61a78669ae2a9549d171ec0f6d68a8373fdf53ff7d3","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:33:26.087 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:33:26.087 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:33:26.087 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:33:26.088 +00:00 [DBG] Start authorize request
2019-02-24 09:33:26.088 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:33:26.088 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:33:26.088 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:33:26.088 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:33:26.088 +00:00 [DBG] No PKCE used.
2019-02-24 09:33:26.088 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:33:26.088 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"a799992eb50ff60a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"a799992eb50ff60a","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:33:26.088 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:33:26.088 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:33:26.088 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:33:26.088 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"a799992eb50ff60a","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:33:26.099 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:33:26.099 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:33:26.099 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:33:26.099 +00:00 [DBG] Start token request.
2019-02-24 09:33:26.099 +00:00 [DBG] Start client validation
2019-02-24 09:33:26.099 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:33:26.099 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:33:26.100 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:33:26.100 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:33:26.100 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:33:26.100 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:33:26.100 +00:00 [DBG] Client validation success
2019-02-24 09:33:26.100 +00:00 [DBG] Start token request validation
2019-02-24 09:33:26.100 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:33:26.100 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:33:26.100 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:33:26.100 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"a799992eb50ff60a","code":"3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:33:26.100 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:33:26.100 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:33:26.100 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:33:26.100 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:33:26.100 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:33:26.113 +00:00 [DBG] Token request success.
2019-02-24 09:34:01.143 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:34:01.143 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:34:01.143 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:34:01.143 +00:00 [DBG] Start token request.
2019-02-24 09:34:01.143 +00:00 [DBG] Start client validation
2019-02-24 09:34:01.143 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:34:01.143 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:34:01.143 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:34:01.143 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:34:01.143 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:01.143 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:34:01.143 +00:00 [DBG] Client validation success
2019-02-24 09:34:01.143 +00:00 [DBG] Start token request validation
2019-02-24 09:34:01.143 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:34:01.143 +00:00 [DBG] authorization_code grant with value: 3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6 not found in store.
2019-02-24 09:34:01.143 +00:00 [ERR] Invalid authorization code: ["3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"a799992eb50ff60a","code":"3025e080febd61edbf13b02db47d05051ade24aed561ec1c74938e3044f8d3b6","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:34:01.188 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:34:01.189 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:34:01.189 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:34:01.189 +00:00 [DBG] Start authorize request
2019-02-24 09:34:01.189 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:34:01.189 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:34:01.189 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:01.189 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:34:01.189 +00:00 [DBG] No PKCE used.
2019-02-24 09:34:01.189 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:34:01.190 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"c3884eff39ed94a4","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"c3884eff39ed94a4","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:34:01.190 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:34:01.190 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:34:01.190 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:34:01.190 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"c3884eff39ed94a4","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:34:01.199 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:34:01.199 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:34:01.199 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:34:01.199 +00:00 [DBG] Start token request.
2019-02-24 09:34:01.199 +00:00 [DBG] Start client validation
2019-02-24 09:34:01.199 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:34:01.199 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:34:01.199 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:34:01.199 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:34:01.200 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:01.200 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:34:01.200 +00:00 [DBG] Client validation success
2019-02-24 09:34:01.200 +00:00 [DBG] Start token request validation
2019-02-24 09:34:01.200 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:34:01.201 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:34:01.201 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:34:01.201 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"c3884eff39ed94a4","code":"f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:34:01.201 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:01.201 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:34:01.201 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:34:01.201 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:34:01.201 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:34:01.214 +00:00 [DBG] Token request success.
2019-02-24 09:34:57.815 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:34:57.815 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:34:57.815 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:34:57.815 +00:00 [DBG] Start token request.
2019-02-24 09:34:57.815 +00:00 [DBG] Start client validation
2019-02-24 09:34:57.815 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:34:57.815 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:34:57.815 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:34:57.815 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:34:57.815 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:57.815 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:34:57.815 +00:00 [DBG] Client validation success
2019-02-24 09:34:57.815 +00:00 [DBG] Start token request validation
2019-02-24 09:34:57.815 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:34:57.815 +00:00 [DBG] authorization_code grant with value: f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea not found in store.
2019-02-24 09:34:57.815 +00:00 [ERR] Invalid authorization code: ["f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"c3884eff39ed94a4","code":"f8b7722f65182e5131a4d34f99db413fad1eb12932aa639466e0ef8124fe77ea","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:34:57.837 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 09:34:57.837 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 09:34:57.837 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 09:34:57.837 +00:00 [DBG] Start authorize request
2019-02-24 09:34:57.837 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:34:57.837 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 09:34:57.837 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:57.837 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 09:34:57.837 +00:00 [DBG] No PKCE used.
2019-02-24 09:34:57.837 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 09:34:57.837 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"29bfadbc0f673de9","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"29bfadbc0f673de9","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 09:34:57.837 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 09:34:57.837 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 09:34:57.837 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 09:34:57.838 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"29bfadbc0f673de9","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 09:34:57.843 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 09:34:57.843 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 09:34:57.843 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 09:34:57.843 +00:00 [DBG] Start token request.
2019-02-24 09:34:57.843 +00:00 [DBG] Start client validation
2019-02-24 09:34:57.843 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 09:34:57.843 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 09:34:57.843 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 09:34:57.843 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 09:34:57.843 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:57.843 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 09:34:57.843 +00:00 [DBG] Client validation success
2019-02-24 09:34:57.843 +00:00 [DBG] Start token request validation
2019-02-24 09:34:57.843 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 09:34:57.843 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 09:34:57.843 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 09:34:57.843 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"29bfadbc0f673de9","code":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 09:34:57.843 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 09:34:57.844 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 09:34:57.844 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 09:34:57.844 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 09:34:57.844 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 09:34:57.855 +00:00 [DBG] Token request success.
2019-02-24 10:12:09.901 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:09.902 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:09.902 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:09.902 +00:00 [DBG] Start token request.
2019-02-24 10:12:09.902 +00:00 [DBG] Start client validation
2019-02-24 10:12:09.902 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:09.903 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:09.903 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:09.903 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:09.903 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:09.903 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:09.903 +00:00 [DBG] Client validation success
2019-02-24 10:12:09.903 +00:00 [DBG] Start token request validation
2019-02-24 10:12:09.903 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:09.903 +00:00 [DBG] authorization_code grant with value: 767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9 not found in store.
2019-02-24 10:12:09.903 +00:00 [ERR] Invalid authorization code: ["767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"29bfadbc0f673de9","code":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:09.937 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:09.938 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:09.938 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:09.938 +00:00 [DBG] Start token request.
2019-02-24 10:12:09.938 +00:00 [DBG] Start client validation
2019-02-24 10:12:09.938 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:09.938 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:09.938 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:09.938 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:09.938 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:09.938 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:09.938 +00:00 [DBG] Client validation success
2019-02-24 10:12:09.938 +00:00 [DBG] Start token request validation
2019-02-24 10:12:09.938 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:09.938 +00:00 [DBG] authorization_code grant with value: 767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9 not found in store.
2019-02-24 10:12:09.939 +00:00 [ERR] Invalid authorization code: ["767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"29bfadbc0f673de9","code":"767051640f33eb44031cea4aaa172ddd035d1a9b2e8f623b11072c8cbc84c5c9","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:09.954 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:12:09.954 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:12:09.954 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:12:09.954 +00:00 [DBG] Start authorize request
2019-02-24 10:12:09.954 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:09.954 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:12:09.954 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:09.954 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:12:09.954 +00:00 [DBG] No PKCE used.
2019-02-24 10:12:09.954 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:12:09.954 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"a244ef982a8ed5c8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"a244ef982a8ed5c8","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:12:09.954 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:12:09.954 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:12:09.954 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:12:09.954 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"a244ef982a8ed5c8","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:12:09.963 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:09.963 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:09.963 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:09.963 +00:00 [DBG] Start token request.
2019-02-24 10:12:09.963 +00:00 [DBG] Start client validation
2019-02-24 10:12:09.963 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:09.963 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:09.963 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:09.963 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:09.963 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:09.963 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:09.963 +00:00 [DBG] Client validation success
2019-02-24 10:12:09.963 +00:00 [DBG] Start token request validation
2019-02-24 10:12:09.963 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:09.963 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:12:09.963 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:12:09.963 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"a244ef982a8ed5c8","code":"b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:09.964 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:09.964 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:12:09.964 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:09.964 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:12:09.964 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:12:09.976 +00:00 [DBG] Token request success.
2019-02-24 10:12:12.578 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:12.578 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:12.578 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:12.578 +00:00 [DBG] Start token request.
2019-02-24 10:12:12.578 +00:00 [DBG] Start client validation
2019-02-24 10:12:12.578 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:12.578 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:12.578 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:12.578 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:12.578 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:12.579 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:12.579 +00:00 [DBG] Client validation success
2019-02-24 10:12:12.579 +00:00 [DBG] Start token request validation
2019-02-24 10:12:12.579 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:12.579 +00:00 [DBG] authorization_code grant with value: b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac not found in store.
2019-02-24 10:12:12.579 +00:00 [ERR] Invalid authorization code: ["b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"a244ef982a8ed5c8","code":"b65d3fce3ae75ec893608236910d6018a0e1179620fe1cda3718f9f86cb921ac","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:12.584 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:12:12.584 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:12:12.584 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:12:12.584 +00:00 [DBG] Start authorize request
2019-02-24 10:12:12.584 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:12.584 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:12:12.585 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:12.585 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:12:12.585 +00:00 [DBG] No PKCE used.
2019-02-24 10:12:12.585 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:12:12.585 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"479f35fc61d4c270","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"479f35fc61d4c270","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:12:12.585 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:12:12.585 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:12:12.585 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:12:12.585 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"479f35fc61d4c270","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:12:12.590 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:12.590 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:12.590 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:12.590 +00:00 [DBG] Start token request.
2019-02-24 10:12:12.590 +00:00 [DBG] Start client validation
2019-02-24 10:12:12.590 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:12.590 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:12.590 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:12.590 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:12.590 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:12.590 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:12.590 +00:00 [DBG] Client validation success
2019-02-24 10:12:12.590 +00:00 [DBG] Start token request validation
2019-02-24 10:12:12.590 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:12.590 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:12:12.590 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:12:12.590 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"479f35fc61d4c270","code":"81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:12.590 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:12.590 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:12:12.590 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:12.591 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:12:12.591 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:12:12.601 +00:00 [DBG] Token request success.
2019-02-24 10:12:22.511 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:22.511 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:22.511 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:22.511 +00:00 [DBG] Start token request.
2019-02-24 10:12:22.511 +00:00 [DBG] Start client validation
2019-02-24 10:12:22.511 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:22.511 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:22.511 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:22.511 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:22.511 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:22.511 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:22.511 +00:00 [DBG] Client validation success
2019-02-24 10:12:22.511 +00:00 [DBG] Start token request validation
2019-02-24 10:12:22.511 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:22.511 +00:00 [DBG] authorization_code grant with value: 81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b not found in store.
2019-02-24 10:12:22.511 +00:00 [ERR] Invalid authorization code: ["81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"479f35fc61d4c270","code":"81734f08a826504d7801722cb300ce3d6f9410614af3da7eeb0bc87ee6f8334b","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:22.517 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:12:22.517 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:12:22.517 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:12:22.517 +00:00 [DBG] Start authorize request
2019-02-24 10:12:22.517 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:22.517 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:12:22.517 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:22.517 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:12:22.517 +00:00 [DBG] No PKCE used.
2019-02-24 10:12:22.517 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:12:22.517 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"10ab4b57519f0fd6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"10ab4b57519f0fd6","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:12:22.517 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:12:22.517 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:12:22.517 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:12:22.517 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"10ab4b57519f0fd6","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:12:22.522 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:22.523 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:22.523 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:22.523 +00:00 [DBG] Start token request.
2019-02-24 10:12:22.523 +00:00 [DBG] Start client validation
2019-02-24 10:12:22.523 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:22.523 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:22.523 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:22.523 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:22.523 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:22.523 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:22.523 +00:00 [DBG] Client validation success
2019-02-24 10:12:22.523 +00:00 [DBG] Start token request validation
2019-02-24 10:12:22.523 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:22.523 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:12:22.523 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:12:22.523 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"10ab4b57519f0fd6","code":"53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:22.523 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:22.523 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:12:22.523 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:22.523 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:12:22.523 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:12:22.533 +00:00 [DBG] Token request success.
2019-02-24 10:12:33.636 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:33.636 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:33.636 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:33.636 +00:00 [DBG] Start token request.
2019-02-24 10:12:33.636 +00:00 [DBG] Start client validation
2019-02-24 10:12:33.636 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:33.636 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:33.636 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:33.636 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:33.636 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:33.636 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:33.636 +00:00 [DBG] Client validation success
2019-02-24 10:12:33.636 +00:00 [DBG] Start token request validation
2019-02-24 10:12:33.636 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:33.636 +00:00 [DBG] authorization_code grant with value: 53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767 not found in store.
2019-02-24 10:12:33.636 +00:00 [ERR] Invalid authorization code: ["53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"10ab4b57519f0fd6","code":"53ca2dbee6d0907e8110d0d31e12b5f16f6caa39aceb03cec10cbcec0dae7767","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:33.693 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:12:33.693 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:12:33.693 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:12:33.693 +00:00 [DBG] Start authorize request
2019-02-24 10:12:33.693 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:33.693 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:12:33.693 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:33.693 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:12:33.693 +00:00 [DBG] No PKCE used.
2019-02-24 10:12:33.693 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:12:33.693 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"37f010e2e6ed665c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"37f010e2e6ed665c","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:12:33.693 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:12:33.693 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:12:33.693 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:12:33.694 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"37f010e2e6ed665c","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:12:33.703 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:33.704 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:33.704 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:33.704 +00:00 [DBG] Start token request.
2019-02-24 10:12:33.704 +00:00 [DBG] Start client validation
2019-02-24 10:12:33.704 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:33.704 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:33.704 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:33.704 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:33.704 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:33.704 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:33.705 +00:00 [DBG] Client validation success
2019-02-24 10:12:33.705 +00:00 [DBG] Start token request validation
2019-02-24 10:12:33.705 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:33.705 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:12:33.705 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:12:33.705 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"37f010e2e6ed665c","code":"e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:33.705 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:33.706 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:12:33.706 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:33.706 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:12:33.706 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:12:33.719 +00:00 [DBG] Token request success.
2019-02-24 10:12:35.098 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:35.098 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:35.098 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:35.098 +00:00 [DBG] Start token request.
2019-02-24 10:12:35.098 +00:00 [DBG] Start client validation
2019-02-24 10:12:35.098 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:35.098 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:35.098 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:35.098 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:35.098 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:35.098 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:35.098 +00:00 [DBG] Client validation success
2019-02-24 10:12:35.098 +00:00 [DBG] Start token request validation
2019-02-24 10:12:35.098 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:35.098 +00:00 [DBG] authorization_code grant with value: e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad not found in store.
2019-02-24 10:12:35.098 +00:00 [ERR] Invalid authorization code: ["e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"37f010e2e6ed665c","code":"e20685e340430d180eed0776ad5d785414e0fd2c2d15d91032e7b5e7925fc7ad","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:35.106 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:12:35.106 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:12:35.106 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:12:35.106 +00:00 [DBG] Start authorize request
2019-02-24 10:12:35.106 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:35.106 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:12:35.106 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:35.106 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:12:35.106 +00:00 [DBG] No PKCE used.
2019-02-24 10:12:35.106 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:12:35.107 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"baf8a0c727f66ce8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"baf8a0c727f66ce8","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:12:35.107 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:12:35.107 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:12:35.107 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:12:35.107 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"baf8a0c727f66ce8","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:12:35.112 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:12:35.112 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:12:35.112 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:12:35.112 +00:00 [DBG] Start token request.
2019-02-24 10:12:35.112 +00:00 [DBG] Start client validation
2019-02-24 10:12:35.112 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:12:35.112 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:12:35.112 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:12:35.112 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:12:35.112 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:35.113 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:12:35.113 +00:00 [DBG] Client validation success
2019-02-24 10:12:35.113 +00:00 [DBG] Start token request validation
2019-02-24 10:12:35.113 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:12:35.113 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:12:35.113 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:12:35.113 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"baf8a0c727f66ce8","code":"6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:12:35.113 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:12:35.113 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:12:35.113 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:12:35.113 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:12:35.113 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:12:35.124 +00:00 [DBG] Token request success.
2019-02-24 10:13:41.650 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:13:41.650 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:13:41.650 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:13:41.650 +00:00 [DBG] Start token request.
2019-02-24 10:13:41.650 +00:00 [DBG] Start client validation
2019-02-24 10:13:41.650 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:13:41.650 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:13:41.650 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:13:41.650 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:13:41.650 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:13:41.650 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:13:41.650 +00:00 [DBG] Client validation success
2019-02-24 10:13:41.650 +00:00 [DBG] Start token request validation
2019-02-24 10:13:41.650 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:13:41.650 +00:00 [DBG] authorization_code grant with value: 6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f not found in store.
2019-02-24 10:13:41.650 +00:00 [ERR] Invalid authorization code: ["6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"baf8a0c727f66ce8","code":"6dccd1850f0f5524e3c37293bbc201a3eb9970ae0c5e4cf0a048bd6dc01ba82f","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:13:41.656 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:13:41.656 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:13:41.656 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:13:41.656 +00:00 [DBG] Start authorize request
2019-02-24 10:13:41.657 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:13:41.657 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:13:41.657 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:13:41.657 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:13:41.657 +00:00 [DBG] No PKCE used.
2019-02-24 10:13:41.657 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:13:41.657 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"faccad35d5470d7c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"faccad35d5470d7c","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:13:41.657 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:13:41.657 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:13:41.657 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:13:41.657 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"faccad35d5470d7c","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:13:41.665 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:13:41.665 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:13:41.665 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:13:41.665 +00:00 [DBG] Start token request.
2019-02-24 10:13:41.665 +00:00 [DBG] Start client validation
2019-02-24 10:13:41.665 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:13:41.665 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:13:41.666 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:13:41.666 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:13:41.666 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:13:41.666 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:13:41.666 +00:00 [DBG] Client validation success
2019-02-24 10:13:41.666 +00:00 [DBG] Start token request validation
2019-02-24 10:13:41.666 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:13:41.666 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:13:41.666 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:13:41.666 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"faccad35d5470d7c","code":"df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:13:41.666 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:13:41.666 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:13:41.666 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:13:41.666 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:13:41.666 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:13:41.677 +00:00 [DBG] Token request success.
2019-02-24 10:14:19.563 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:14:19.564 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:14:19.564 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:14:19.564 +00:00 [DBG] Start token request.
2019-02-24 10:14:19.564 +00:00 [DBG] Start client validation
2019-02-24 10:14:19.564 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:14:19.564 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:14:19.564 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:14:19.564 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:14:19.564 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:14:19.564 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:14:19.564 +00:00 [DBG] Client validation success
2019-02-24 10:14:19.564 +00:00 [DBG] Start token request validation
2019-02-24 10:14:19.564 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:14:19.564 +00:00 [DBG] authorization_code grant with value: df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa not found in store.
2019-02-24 10:14:19.564 +00:00 [ERR] Invalid authorization code: ["df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"faccad35d5470d7c","code":"df90244cd34eb467615fb4bc8f886eb76d561c5990f197fcaa5038f4e94664fa","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:14:19.615 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:14:19.615 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:14:19.615 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:14:19.615 +00:00 [DBG] Start authorize request
2019-02-24 10:14:19.616 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:14:19.616 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:14:19.616 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:14:19.616 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:14:19.616 +00:00 [DBG] No PKCE used.
2019-02-24 10:14:19.616 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:14:19.616 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"b169495f190634e7","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"b169495f190634e7","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:14:19.616 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:14:19.616 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:14:19.616 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:14:19.616 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"b169495f190634e7","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:14:19.628 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:14:19.628 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:14:19.628 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:14:19.628 +00:00 [DBG] Start token request.
2019-02-24 10:14:19.628 +00:00 [DBG] Start client validation
2019-02-24 10:14:19.628 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:14:19.628 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:14:19.628 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:14:19.628 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:14:19.628 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:14:19.628 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:14:19.628 +00:00 [DBG] Client validation success
2019-02-24 10:14:19.628 +00:00 [DBG] Start token request validation
2019-02-24 10:14:19.628 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:14:19.629 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:14:19.629 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:14:19.629 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"b169495f190634e7","code":"b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:14:19.629 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:14:19.629 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:14:19.629 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:14:19.629 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:14:19.629 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:14:19.641 +00:00 [DBG] Token request success.
2019-02-24 10:22:18.403 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:22:18.404 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:22:18.404 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:22:18.404 +00:00 [DBG] Start token request.
2019-02-24 10:22:18.404 +00:00 [DBG] Start client validation
2019-02-24 10:22:18.404 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:22:18.404 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:22:18.404 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:22:18.404 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:22:18.405 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:22:18.405 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:22:18.405 +00:00 [DBG] Client validation success
2019-02-24 10:22:18.405 +00:00 [DBG] Start token request validation
2019-02-24 10:22:18.405 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:22:18.405 +00:00 [DBG] authorization_code grant with value: b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e not found in store.
2019-02-24 10:22:18.405 +00:00 [ERR] Invalid authorization code: ["b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"b169495f190634e7","code":"b3b6d5ab81703748780385c90e1f8116c0474b7a19ab4307cfd3972684c7912e","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:22:18.445 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 10:22:18.445 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 10:22:18.445 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 10:22:18.445 +00:00 [DBG] Start authorize request
2019-02-24 10:22:18.445 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:22:18.445 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 10:22:18.445 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:22:18.445 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 10:22:18.445 +00:00 [DBG] No PKCE used.
2019-02-24 10:22:18.445 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 10:22:18.446 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"cbbabc9a76bb5b20","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"cbbabc9a76bb5b20","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 10:22:18.446 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 10:22:18.446 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 10:22:18.446 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 10:22:18.446 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"cbbabc9a76bb5b20","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 10:22:18.455 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 10:22:18.455 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 10:22:18.455 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 10:22:18.455 +00:00 [DBG] Start token request.
2019-02-24 10:22:18.455 +00:00 [DBG] Start client validation
2019-02-24 10:22:18.455 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 10:22:18.455 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 10:22:18.455 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 10:22:18.455 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 10:22:18.456 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:22:18.456 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 10:22:18.456 +00:00 [DBG] Client validation success
2019-02-24 10:22:18.456 +00:00 [DBG] Start token request validation
2019-02-24 10:22:18.456 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 10:22:18.456 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 10:22:18.456 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 10:22:18.456 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"cbbabc9a76bb5b20","code":"179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 10:22:18.456 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 10:22:18.456 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 10:22:18.456 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 10:22:18.456 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 10:22:18.456 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 10:22:18.467 +00:00 [DBG] Token request success.
2019-02-24 13:14:31.128 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:14:31.129 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:14:31.129 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:14:31.129 +00:00 [DBG] Start token request.
2019-02-24 13:14:31.129 +00:00 [DBG] Start client validation
2019-02-24 13:14:31.129 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:14:31.129 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:14:31.129 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:14:31.129 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:14:31.129 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:14:31.129 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:14:31.129 +00:00 [DBG] Client validation success
2019-02-24 13:14:31.129 +00:00 [DBG] Start token request validation
2019-02-24 13:14:31.129 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:14:31.129 +00:00 [DBG] authorization_code grant with value: 179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2 not found in store.
2019-02-24 13:14:31.129 +00:00 [ERR] Invalid authorization code: ["179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"cbbabc9a76bb5b20","code":"179da22b4cc012e49a13f5803496335fe8e87c05881c9b369ff38cf87fc0caa2","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:14:31.169 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:14:31.169 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:14:31.169 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:14:31.169 +00:00 [DBG] Start authorize request
2019-02-24 13:14:31.169 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:14:31.169 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:14:31.169 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:14:31.169 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:14:31.169 +00:00 [DBG] No PKCE used.
2019-02-24 13:14:31.169 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:14:31.169 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"c98a001f9b9ec0bd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"c98a001f9b9ec0bd","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:14:31.169 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:14:31.169 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:14:31.169 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:14:31.169 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"c98a001f9b9ec0bd","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:14:31.176 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:14:31.177 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:14:31.177 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:14:31.177 +00:00 [DBG] Start token request.
2019-02-24 13:14:31.177 +00:00 [DBG] Start client validation
2019-02-24 13:14:31.177 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:14:31.177 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:14:31.177 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:14:31.177 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:14:31.177 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:14:31.177 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:14:31.177 +00:00 [DBG] Client validation success
2019-02-24 13:14:31.177 +00:00 [DBG] Start token request validation
2019-02-24 13:14:31.177 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:14:31.177 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:14:31.177 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:14:31.178 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"c98a001f9b9ec0bd","code":"9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:14:31.178 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:14:31.178 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:14:31.178 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:14:31.178 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:14:31.178 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:14:31.189 +00:00 [DBG] Token request success.
2019-02-24 13:15:14.941 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:15:14.941 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:15:14.941 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:15:14.941 +00:00 [DBG] Start token request.
2019-02-24 13:15:14.941 +00:00 [DBG] Start client validation
2019-02-24 13:15:14.941 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:15:14.941 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:15:14.941 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:15:14.941 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:15:14.941 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:15:14.941 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:15:14.941 +00:00 [DBG] Client validation success
2019-02-24 13:15:14.941 +00:00 [DBG] Start token request validation
2019-02-24 13:15:14.941 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:15:14.941 +00:00 [DBG] authorization_code grant with value: 9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0 not found in store.
2019-02-24 13:15:14.941 +00:00 [ERR] Invalid authorization code: ["9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"c98a001f9b9ec0bd","code":"9862d09518576f27ac2d94ee016f6c59a8faacf9bb190250096a1e6e84dc8da0","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:15:14.989 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:15:14.989 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:15:14.989 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:15:14.989 +00:00 [DBG] Start authorize request
2019-02-24 13:15:14.989 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:15:14.989 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:15:14.989 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:15:14.989 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:15:14.989 +00:00 [DBG] No PKCE used.
2019-02-24 13:15:14.989 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:15:14.989 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"25ad653534d970c8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"25ad653534d970c8","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:15:14.989 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:15:14.989 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:15:14.989 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:15:14.989 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"25ad653534d970c8","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:15:14.997 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:15:14.997 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:15:14.997 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:15:14.998 +00:00 [DBG] Start token request.
2019-02-24 13:15:14.998 +00:00 [DBG] Start client validation
2019-02-24 13:15:14.998 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:15:14.998 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:15:14.998 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:15:14.998 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:15:14.998 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:15:14.998 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:15:14.998 +00:00 [DBG] Client validation success
2019-02-24 13:15:14.998 +00:00 [DBG] Start token request validation
2019-02-24 13:15:14.998 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:15:14.998 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:15:14.998 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:15:14.998 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"25ad653534d970c8","code":"031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:15:14.998 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:15:14.998 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:15:14.999 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:15:14.999 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:15:14.999 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:15:15.012 +00:00 [DBG] Token request success.
2019-02-24 13:22:59.251 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:22:59.251 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:22:59.251 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:22:59.251 +00:00 [DBG] Start token request.
2019-02-24 13:22:59.251 +00:00 [DBG] Start client validation
2019-02-24 13:22:59.251 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:22:59.252 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:22:59.252 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:22:59.252 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:22:59.252 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:22:59.252 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:22:59.252 +00:00 [DBG] Client validation success
2019-02-24 13:22:59.252 +00:00 [DBG] Start token request validation
2019-02-24 13:22:59.252 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:22:59.252 +00:00 [DBG] authorization_code grant with value: 031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac not found in store.
2019-02-24 13:22:59.252 +00:00 [ERR] Invalid authorization code: ["031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"25ad653534d970c8","code":"031a250d1b792f12c78f9e8b809249581db0bf237679c537cef662e18c4dacac","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:22:59.295 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:22:59.295 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:22:59.295 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:22:59.295 +00:00 [DBG] Start authorize request
2019-02-24 13:22:59.295 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:22:59.295 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:22:59.295 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:22:59.295 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:22:59.295 +00:00 [DBG] No PKCE used.
2019-02-24 13:22:59.295 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:22:59.295 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"5316783980f4ca8a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"5316783980f4ca8a","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:22:59.295 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:22:59.295 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:22:59.295 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:22:59.296 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"5316783980f4ca8a","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:22:59.305 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:22:59.305 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:22:59.305 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:22:59.305 +00:00 [DBG] Start token request.
2019-02-24 13:22:59.305 +00:00 [DBG] Start client validation
2019-02-24 13:22:59.305 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:22:59.305 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:22:59.305 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:22:59.305 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:22:59.305 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:22:59.305 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:22:59.305 +00:00 [DBG] Client validation success
2019-02-24 13:22:59.305 +00:00 [DBG] Start token request validation
2019-02-24 13:22:59.306 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:22:59.306 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:22:59.306 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:22:59.306 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"5316783980f4ca8a","code":"a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:22:59.306 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:22:59.306 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:22:59.306 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:22:59.306 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:22:59.306 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:22:59.318 +00:00 [DBG] Token request success.
2019-02-24 13:25:54.222 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:25:54.223 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:25:54.223 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:25:54.223 +00:00 [DBG] Start token request.
2019-02-24 13:25:54.223 +00:00 [DBG] Start client validation
2019-02-24 13:25:54.223 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:25:54.223 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:25:54.223 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:25:54.223 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:25:54.224 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:25:54.224 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:25:54.224 +00:00 [DBG] Client validation success
2019-02-24 13:25:54.224 +00:00 [DBG] Start token request validation
2019-02-24 13:25:54.224 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:25:54.224 +00:00 [DBG] authorization_code grant with value: a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f not found in store.
2019-02-24 13:25:54.224 +00:00 [ERR] Invalid authorization code: ["a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"5316783980f4ca8a","code":"a2054e0812704ce9c03e8fa73815d547a178c2c45374d5fa3f6a2ca0864b3a6f","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:25:54.273 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:25:54.273 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:25:54.273 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:25:54.273 +00:00 [DBG] Start authorize request
2019-02-24 13:25:54.273 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:25:54.273 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:25:54.273 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:25:54.274 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:25:54.274 +00:00 [DBG] No PKCE used.
2019-02-24 13:25:54.274 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:25:54.274 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"1a238881ef2794c0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"1a238881ef2794c0","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:25:54.274 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:25:54.274 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:25:54.274 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:25:54.274 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"1a238881ef2794c0","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:25:54.281 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:25:54.281 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:25:54.281 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:25:54.281 +00:00 [DBG] Start token request.
2019-02-24 13:25:54.281 +00:00 [DBG] Start client validation
2019-02-24 13:25:54.281 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:25:54.281 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:25:54.281 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:25:54.281 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:25:54.282 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:25:54.282 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:25:54.282 +00:00 [DBG] Client validation success
2019-02-24 13:25:54.282 +00:00 [DBG] Start token request validation
2019-02-24 13:25:54.282 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:25:54.282 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:25:54.282 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:25:54.282 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"1a238881ef2794c0","code":"e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:25:54.282 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:25:54.282 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:25:54.282 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:25:54.282 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:25:54.282 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:25:54.294 +00:00 [DBG] Token request success.
2019-02-24 13:25:54.397 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:25:54.397 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:25:54.397 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:25:54.397 +00:00 [DBG] Start token request.
2019-02-24 13:25:54.397 +00:00 [DBG] Start client validation
2019-02-24 13:25:54.397 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:25:54.397 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:25:54.397 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:25:54.397 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:25:54.397 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:25:54.397 +00:00 [DBG] Client validation success
2019-02-24 13:25:54.397 +00:00 [DBG] Start token request validation
2019-02-24 13:25:54.400 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:25:54.403 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:25:54.403 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:25:54.405 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:25:54.415 +00:00 [DBG] Token request success.
2019-02-24 13:26:24.923 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:26:24.923 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:26:24.923 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:26:24.923 +00:00 [DBG] Start token request.
2019-02-24 13:26:24.923 +00:00 [DBG] Start client validation
2019-02-24 13:26:24.923 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:26:24.923 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:26:24.923 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:26:24.923 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:26:24.923 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:26:24.923 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:26:24.923 +00:00 [DBG] Client validation success
2019-02-24 13:26:24.923 +00:00 [DBG] Start token request validation
2019-02-24 13:26:24.923 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:26:24.923 +00:00 [DBG] authorization_code grant with value: e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565 not found in store.
2019-02-24 13:26:24.923 +00:00 [ERR] Invalid authorization code: ["e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"1a238881ef2794c0","code":"e7818ebf562875eabe18cf25ea8735fc5746530099dfe4712d947c127ee37565","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:26:24.971 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:26:24.972 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:26:24.972 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:26:24.972 +00:00 [DBG] Start authorize request
2019-02-24 13:26:24.972 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:26:24.972 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:26:24.972 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:26:24.972 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:26:24.972 +00:00 [DBG] No PKCE used.
2019-02-24 13:26:24.972 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:26:24.972 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"bf15d218e5b6f94a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"bf15d218e5b6f94a","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:26:24.972 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:26:24.972 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:26:24.972 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:26:24.972 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"bf15d218e5b6f94a","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:26:24.981 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:26:24.981 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:26:24.981 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:26:24.981 +00:00 [DBG] Start token request.
2019-02-24 13:26:24.981 +00:00 [DBG] Start client validation
2019-02-24 13:26:24.981 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:26:24.981 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:26:24.981 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:26:24.981 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:26:24.981 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:26:24.981 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:26:24.981 +00:00 [DBG] Client validation success
2019-02-24 13:26:24.981 +00:00 [DBG] Start token request validation
2019-02-24 13:26:24.981 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:26:24.982 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:26:24.982 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:26:24.982 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"bf15d218e5b6f94a","code":"2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:26:24.982 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:26:24.982 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:26:24.982 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:26:24.982 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:26:24.982 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:26:24.995 +00:00 [DBG] Token request success.
2019-02-24 13:26:25.094 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:26:25.094 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:26:25.094 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:26:25.094 +00:00 [DBG] Start token request.
2019-02-24 13:26:25.094 +00:00 [DBG] Start client validation
2019-02-24 13:26:25.094 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:26:25.094 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:26:25.094 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:26:25.094 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:26:25.094 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:26:25.095 +00:00 [DBG] Client validation success
2019-02-24 13:26:25.095 +00:00 [DBG] Start token request validation
2019-02-24 13:26:25.095 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:26:25.095 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:26:25.095 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:26:25.095 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:26:25.107 +00:00 [DBG] Token request success.
2019-02-24 13:26:25.338 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-24 13:26:25.338 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-24 13:26:25.338 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-24 13:26:25.341 +00:00 [DBG] Start key discovery request
2019-02-24 13:27:04.761 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:04.761 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:04.761 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:04.762 +00:00 [DBG] Start token request.
2019-02-24 13:27:04.762 +00:00 [DBG] Start client validation
2019-02-24 13:27:04.762 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:04.762 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:27:04.762 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:27:04.762 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:04.762 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:04.762 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:04.762 +00:00 [DBG] Client validation success
2019-02-24 13:27:04.762 +00:00 [DBG] Start token request validation
2019-02-24 13:27:04.762 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:27:04.762 +00:00 [DBG] authorization_code grant with value: 2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120 not found in store.
2019-02-24 13:27:04.762 +00:00 [ERR] Invalid authorization code: ["2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"bf15d218e5b6f94a","code":"2b9d9c645cf7a6cc21f91c4c0f332904bc26d900117931762cfd26f8f84dc120","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:04.804 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:27:04.804 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:27:04.804 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:27:04.804 +00:00 [DBG] Start authorize request
2019-02-24 13:27:04.804 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:27:04.804 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:27:04.804 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:04.804 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:27:04.804 +00:00 [DBG] No PKCE used.
2019-02-24 13:27:04.805 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:27:04.805 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"5575e4d6044b5a9c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"5575e4d6044b5a9c","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:27:04.805 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:27:04.805 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:27:04.805 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:27:04.805 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"5575e4d6044b5a9c","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:27:04.815 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:04.815 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:04.815 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:04.815 +00:00 [DBG] Start token request.
2019-02-24 13:27:04.815 +00:00 [DBG] Start client validation
2019-02-24 13:27:04.815 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:04.815 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:27:04.815 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:27:04.815 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:04.815 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:04.815 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:04.815 +00:00 [DBG] Client validation success
2019-02-24 13:27:04.816 +00:00 [DBG] Start token request validation
2019-02-24 13:27:04.816 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:27:04.816 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:27:04.816 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:27:04.816 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"5575e4d6044b5a9c","code":"85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:04.816 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:04.816 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:27:04.816 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:27:04.816 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:27:04.816 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:27:04.828 +00:00 [DBG] Token request success.
2019-02-24 13:27:04.925 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:04.925 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:04.926 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:04.926 +00:00 [DBG] Start token request.
2019-02-24 13:27:04.926 +00:00 [DBG] Start client validation
2019-02-24 13:27:04.926 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:04.926 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:27:04.926 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:04.926 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:04.926 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:04.926 +00:00 [DBG] Client validation success
2019-02-24 13:27:04.926 +00:00 [DBG] Start token request validation
2019-02-24 13:27:04.926 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:27:04.926 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:27:04.926 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:04.926 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:27:04.936 +00:00 [DBG] Token request success.
2019-02-24 13:27:05.151 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-24 13:27:05.151 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-24 13:27:05.151 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-24 13:27:05.151 +00:00 [DBG] Start key discovery request
2019-02-24 13:27:46.549 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:46.550 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:46.550 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:46.550 +00:00 [DBG] Start token request.
2019-02-24 13:27:46.550 +00:00 [DBG] Start client validation
2019-02-24 13:27:46.550 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:46.550 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:27:46.550 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:27:46.550 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:46.550 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:46.550 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:46.550 +00:00 [DBG] Client validation success
2019-02-24 13:27:46.550 +00:00 [DBG] Start token request validation
2019-02-24 13:27:46.550 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:27:46.550 +00:00 [DBG] authorization_code grant with value: 85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff not found in store.
2019-02-24 13:27:46.550 +00:00 [ERR] Invalid authorization code: ["85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"5575e4d6044b5a9c","code":"85aff1e71ba8071a339b28f8dcce8d11563131233164d9da2c6387e8dd5d65ff","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:46.602 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:27:46.602 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:27:46.602 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:27:46.602 +00:00 [DBG] Start authorize request
2019-02-24 13:27:46.602 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:27:46.602 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:27:46.602 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:46.602 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:27:46.602 +00:00 [DBG] No PKCE used.
2019-02-24 13:27:46.602 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:27:46.602 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"98e633db8c463875","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"98e633db8c463875","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:27:46.602 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:27:46.602 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:27:46.603 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:27:46.603 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"98e633db8c463875","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:27:46.612 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:46.612 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:46.612 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:46.612 +00:00 [DBG] Start token request.
2019-02-24 13:27:46.612 +00:00 [DBG] Start client validation
2019-02-24 13:27:46.612 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:46.612 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:27:46.612 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:27:46.612 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:46.612 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:46.612 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:46.612 +00:00 [DBG] Client validation success
2019-02-24 13:27:46.612 +00:00 [DBG] Start token request validation
2019-02-24 13:27:46.612 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:27:46.613 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:27:46.613 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:27:46.613 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"98e633db8c463875","code":"940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:46.613 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:46.613 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:27:46.613 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:27:46.613 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:27:46.613 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:27:46.627 +00:00 [DBG] Token request success.
2019-02-24 13:27:56.377 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:27:56.377 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:27:56.377 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:27:56.377 +00:00 [DBG] Start token request.
2019-02-24 13:27:56.377 +00:00 [DBG] Start client validation
2019-02-24 13:27:56.377 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:27:56.377 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:27:56.377 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:27:56.377 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:27:56.377 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:27:56.377 +00:00 [DBG] Client validation success
2019-02-24 13:27:56.377 +00:00 [DBG] Start token request validation
2019-02-24 13:27:56.378 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:27:56.378 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:27:56.378 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:27:56.378 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:27:56.388 +00:00 [DBG] Token request success.
2019-02-24 13:28:59.769 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:28:59.770 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:28:59.770 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:28:59.770 +00:00 [DBG] Start token request.
2019-02-24 13:28:59.770 +00:00 [DBG] Start client validation
2019-02-24 13:28:59.770 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:28:59.770 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:28:59.770 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:28:59.770 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:28:59.770 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:28:59.770 +00:00 [DBG] Client validation success
2019-02-24 13:28:59.770 +00:00 [DBG] Start token request validation
2019-02-24 13:28:59.770 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:28:59.770 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:28:59.771 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:28:59.771 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:28:59.782 +00:00 [DBG] Token request success.
2019-02-24 13:31:47.164 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:31:47.164 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:31:47.164 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:31:47.164 +00:00 [DBG] Start token request.
2019-02-24 13:31:47.164 +00:00 [DBG] Start client validation
2019-02-24 13:31:47.165 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:31:47.165 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:31:47.165 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:31:47.165 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:31:47.165 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:31:47.165 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:31:47.165 +00:00 [DBG] Client validation success
2019-02-24 13:31:47.165 +00:00 [DBG] Start token request validation
2019-02-24 13:31:47.165 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:31:47.165 +00:00 [DBG] authorization_code grant with value: 940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4 not found in store.
2019-02-24 13:31:47.165 +00:00 [ERR] Invalid authorization code: ["940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4"], request details: {"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"98e633db8c463875","code":"940b830fffb96e928e84f7df42f169dd95cf427d13b7635352ece3d37a14fbb4","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:31:47.207 +00:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-24 13:31:47.207 +00:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-24 13:31:47.207 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-24 13:31:47.207 +00:00 [DBG] Start authorize request
2019-02-24 13:31:47.207 +00:00 [DBG] User in authorize request: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:31:47.207 +00:00 [DBG] Start authorize request protocol validation
2019-02-24 13:31:47.207 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:31:47.207 +00:00 [DBG] Checking for PKCE parameters
2019-02-24 13:31:47.208 +00:00 [DBG] No PKCE used.
2019-02-24 13:31:47.208 +00:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-24 13:31:47.208 +00:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","RedirectUri":"http://localhost:9080/todos","AllowedRedirectUris":["http://localhost:8081/login/idsvr","http://localhost:9080/todos","http://localhost:9080"],"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"todolistAPI.read todolistAPI.write","State":"148da98f0295baee","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"af13326d54f21cd55bacd420998aa70e","Raw":{"client_id":"todolistClient","redirect_uri":"http://localhost:9080/todos","scope":"todolistAPI.read todolistAPI.write","state":"148da98f0295baee","response_type":"code"},"$type":"AuthorizeRequestValidationLog"}
2019-02-24 13:31:47.208 +00:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-24 13:31:47.208 +00:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-02-24 13:31:47.208 +00:00 [DBG] Creating Authorization Code Flow response.
2019-02-24 13:31:47.208 +00:00 [INF] Authorize endpoint response
{"SubjectId":"5BE86359-073C-434B-AD2D-A3932222DABE","ClientId":"todolistClient","RedirectUri":"http://localhost:9080/todos","State":"148da98f0295baee","Scope":"todolistAPI.read todolistAPI.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-24 13:31:47.219 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:31:47.219 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:31:47.219 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:31:47.219 +00:00 [DBG] Start token request.
2019-02-24 13:31:47.219 +00:00 [DBG] Start client validation
2019-02-24 13:31:47.219 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:31:47.219 +00:00 [DBG] Start parsing for secret in post body
2019-02-24 13:31:47.219 +00:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-24 13:31:47.219 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:31:47.219 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:31:47.219 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:31:47.219 +00:00 [DBG] Client validation success
2019-02-24 13:31:47.220 +00:00 [DBG] Start token request validation
2019-02-24 13:31:47.220 +00:00 [DBG] Start validation of authorization code token request
2019-02-24 13:31:47.220 +00:00 [DBG] IsActive called from: AuthorizationCodeValidation
2019-02-24 13:31:47.220 +00:00 [DBG] Validation of authorization code token request success
2019-02-24 13:31:47.220 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"8c5d7ac6bedde5b8d2a53cfc844a2f38c0ab06957f1a334b386c83c4f3d2cfee","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"todolistClient","client_secret":"***REDACTED***","grant_type":"authorization_code","state":"148da98f0295baee","code":"8c5d7ac6bedde5b8d2a53cfc844a2f38c0ab06957f1a334b386c83c4f3d2cfee","redirect_uri":"http://localhost:9080/todos"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:31:47.220 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:31:47.220 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:31:47.220 +00:00 [DBG] Getting claims for access token for subject: 5BE86359-073C-434B-AD2D-A3932222DABE
2019-02-24 13:31:47.220 +00:00 [DBG] Get profile called for subject 5BE86359-073C-434B-AD2D-A3932222DABE from client TodoList Client Credentials Client Application with claim types ["role"] via ClaimsProviderAccessToken
2019-02-24 13:31:47.220 +00:00 [DBG] Issued claims: ["role"]
2019-02-24 13:31:47.233 +00:00 [DBG] Token request success.
2019-02-24 13:31:47.344 +00:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-24 13:31:47.344 +00:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-24 13:31:47.344 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-24 13:31:47.344 +00:00 [DBG] Start token request.
2019-02-24 13:31:47.344 +00:00 [DBG] Start client validation
2019-02-24 13:31:47.344 +00:00 [DBG] Start parsing Basic Authentication secret
2019-02-24 13:31:47.344 +00:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-24 13:31:47.344 +00:00 [DBG] Secret id found: todolistClient
2019-02-24 13:31:47.345 +00:00 [DBG] client configuration validation for client todolistClient succeeded.
2019-02-24 13:31:47.345 +00:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-24 13:31:47.345 +00:00 [DBG] Client validation success
2019-02-24 13:31:47.345 +00:00 [DBG] Start token request validation
2019-02-24 13:31:47.345 +00:00 [DBG] Start client credentials token request validation
2019-02-24 13:31:47.345 +00:00 [DBG] todolistClient credentials token request validation success
2019-02-24 13:31:47.345 +00:00 [INF] Token request validation success
{"ClientId":"todolistClient","ClientName":"TodoList Client Credentials Client Application","GrantType":"client_credentials","Scopes":"todolistAPI.read todolistAPI.write","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"todolistAPI.read todolistAPI.write"},"$type":"TokenRequestValidationLog"}
2019-02-24 13:31:47.345 +00:00 [DBG] Getting claims for access token for client: todolistClient
2019-02-24 13:31:47.357 +00:00 [DBG] Token request success.
2019-02-24 13:31:47.602 +00:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-24 13:31:47.602 +00:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-24 13:31:47.603 +00:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-24 13:31:47.603 +00:00 [DBG] Start key discovery request
